\ProvidesPackage{realpgnum}
\RequirePackage{luacode,luatexbase}
\begin{luacode}
require("realpgno")
mycheck = realpgno.checksum()

function fuf(head,x)
  for item in  node.traverse(head) do
    mycheck(item)
  end
  texio.write_nl("Checksum "..mycheck())
  realpgno.fuf:write(realpgno.nl) 
  return head
end

luatexbase.add_to_callback("pre_linebreak_filter",fuf,"Insert")
\end{luacode}
